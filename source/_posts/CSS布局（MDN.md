## CSS布局（MDN）

​	CSS布局技术可以拾取网页中元素，控制相对正常布局流，周边元素，父容器或者视口位置。

- 正常布局流
- display属性
- 弹性盒
- 网格
- 浮动
- 定位
- CSS表格布局
- 多列布局

### 正常流

​	没有应用CSS规则改变展现方式，网页元素将会按照正常流进行组织。

#### 默认情况元素布局

- 取得元素内容放在独立元素盒子中，然后加上内边距，边框和外边距
- 块级元素width是父元素100%，height和内容高度一致。内联元素height和width与内容一致（可以控制display：block改变尺寸
- 元素之间影响：块元素按照父元素块流动方向布局。内力那元素则不会另起一行
- 相邻两个元素设置有margin，则块方向上的margin会叠加



### 弹性盒

#### 什么是弹性盒

​	在弹性盒出现以前，唯一可靠且兼容的布局工具只有float和position，但这两种工具有一定局限性。

- 在父内容中垂直居中块元素
- 容器子项占用等量可用宽高
- 多列布局中，所有列采用相同高度

#### 弹性盒模型

​	元素表现为flex框时，他们沿两个轴进行布局

- 主轴：沿着flex元素放置方向延伸的轴
- 交叉轴：垂直于flex元素放置方向的轴
- 设置了dipslay：flex的父元素称之为flex容器
- flex容器中表现为柔性盒子的元素称之为flex项

#### flex-direction

- row(默认)
- column
- row-reverse
- column-reverse

#### 换行

- 父元素中flex-wrap：wrap
- flex项中：flex：~px，表示元素宽度至少为~px
- flex-flow缩写：row wrap，是flex-direction和flex-wrap缩写

#### flex项动态尺寸

- flex缩写和全写
  - 第一个无单位比例值，全写flex-grow
  - 第二个无单位比例，全写flex-shrink
  - 第三个最小值，全写flex-basis
- 如果指定比例值和最小值如flex：1 200px，则会先分配最小可用空间，然后按比例分配剩余空间

#### 水平和垂直对齐

- align-items：控制flex项在交叉轴上位置
  - 默认值stretch，交叉轴方向填充容器，如果父容器没有高度，则所有flex项会变得和最长的flex项一样长
  - center：保持原有高度在交叉轴居中
  - flex-start，flex-end：在交叉轴开始/结束对齐
- aling-self：在flex项上使用，覆盖容器align-items行为
- justify-content：控制flex项在主轴上位置
  - 默认值flex-start
  - flex-end
  - center
  - space-between
  - space-around



### 网格布局

​	CSS网格是用于web的二维布局系统，可以使内日哦给你按照行和列的形式进行排版。

#### 什么是网格布局

​	网格是由一系列水平和垂直的线构成的一种布局模式，设计一些列具有固定位置和宽度的元素的页面，使页面更加统一。

- 列
- 行
- 沟槽

#### 定义网格

- display：grid-定义一个网格，直接子项变为网格项，但和flex不同不会立刻产生变化，只创建了一个一列的网格
- grid-template-column：在父容器中定义列，可以使用任何单位

#### fr单位灵活定义网格

- fr表示可用空间的百分比

#### 网格间隙

- grid-column-gap
- grid-row-gap
- grid-gap

#### 显式网格和隐式网格

- 显示网格：用grid-template-columns和grid-template-rows定义的网格
- 隐式网格：当内容溢出网格（div数量多于列数）时才会生成，也就是没有指定的方向（行或列）尺寸会根据放入内容自动设定
- grid-auto-rows/columns：指定隐式网格的宽度

#### minmax（）函数

- minmax（min， max）：以范围值指定行或列的尺寸

#### 自动多列填充

​	使用repreat（）函数自动创建列

- 第一个参数为数字或者auto-fill，表示要填充的列数

- auto-fill作为参数，会自动填充列来填满容器
- 第二个参数为列的宽度，可以使用minmax（）函数

#### 基于线的元素放置

- grid-column：元素列起始和结束的网格线，用 / 分隔
- grid-row：元素行起始和结束网格线

#### 使用grid-template-areas放置元素

- grid-template-areas：在父容器中使用，将网格进行命名，相同名字的网格组成一个区域
- grid-area：在网格元素上使用，会将元素放置到对应的区域中



### 浮动

​	float属性起初是为实现简单布局，让图片浮动在文字中，文字环绕在左边或右边。后来用作整个页面的布局，但是现在已经被新技术取代，算作是传统的布局方法。

​	浮动元素将会脱离正常文档布局流，并且吸附到父容器的左边。在正常布局中位于该浮动元素之下的内容会围绕浮动元素。但和绝对定位不同，浮动元素仍然会影响页面中其他元素。

​	浮动内容仍然遵循盒子模型，如外边距和边界。

#### 清除浮动

​	默认情况下所有在浮动下方的自身不浮动的内容都将会围绕浮动元素进行包装。

- clear:left/right/both

#### 浮动问题

- 整体宽度难以计算，当浮动项宽度超过容器宽度会换行
  - 解决：box-sizing：border-box
- 为浮动元素下方清除浮动元素设置上边距不能制造间隔
  - 浮动元素在父元素中所占面积有效高度为0
  - 底部元素清除浮动后，整体高度会加上浮动元素高度
  - 解决：在浮动元素下方添加一个空div元素，设置clear属性
- 浮动项目的背景高度
  - 在多列布局中，将列高度都设置为相同
  - 为每个float项设置一个相同的固定高度，但这种方法不能自适应内容并延伸各列（flex布局解决的问题



### 定位

​	使用定位技术可以将元素从正常的文档流布局中取出，并赋予不同行为。

#### 文档流

- 盒模型：首先会围绕元素添加内边距，边框和外边距布置单个元素盒子
  - 默认情况块级元素内容区宽度为父元素宽度100%，高度适应内容
  - 内联元素内容区高宽适应内容，不能人为改变（但是可设置内联方向padding和margin）
- 正常布局流：将元素放置到视口的系统
  - 默认情况块元素垂直布局，每一个都会显示在上一个块元素下面的新行，且由margin进行分隔
  - 内联元素不会出现在新行，只要父块级元素有空间其内容就会出现在同一行，否则溢出内容会换行
  - 外边距折叠：垂直方向上两个块元素的margin会取最大值而非叠加

#### 介绍定位

- 静态定位 position：static（默认值）
  - 将元素放入他在文档布局流中正常位置
- 相对定位 position：relative
  - 和静态定位相似，占据正常文档流，但可以改变最终位置
- top，bottom，left，right：指定定位元素移动到的位置
- 绝对定位 position：absolute
  - 绝对定位元素不再存于正常文档布局流中，不干扰也不受正常布局流中其他元素干扰
  - top，bottom，left和right是位于包含元素的位置
- 定位上下文：绝对定位元素的包含元素
  - 取决于绝对定位元素父元素的position属性
  - 只要父元素position属性值不为static就可成为绝对定位元素包含元素
- z-index：绝对定位元素重叠时，决定哪些元素出现在顶部
- 固定定位 position：fixed
  - 和绝对定位工作方式完全相同，但绝对定位固定元素相对于html元素或最近定位祖先，而固定定位元素相对于浏览器视口
  - 同样，固定定位元素不存在于正常文档流中
- 粘滞定位 position：sticky
  - 相对定位和固定定位结合体
  - 粘滞定位元素表现为一个相对定位一样，直到滚动到某个阈值点后变成固定定位
  - 多用于导航栏



### 多列布局

#### 创建多列布局

​	以下两种方式可以创建一个milticol容器

- column-count：创建指定数量的列，具有弹性宽度，浏览器将计算出每一列分配多少空间
- column-width：按照指定宽度尽可能多创建列，剩余空间将会被现有列平分（即可能无法得到指定宽度）

#### multicol创建样式

​	multicol创建的列无法单独设定样式，不存在单独让某一列比其他列更宽的方法，也不能为某一列设置独特背景，前景颜色

- column-gap：改变列间隙
- column-rule：列间增加分割线

#### 列和内容折断

​	默认情况下多列布局中的内容将会被拆分为碎块放入，但是可以使用一个属性来关闭内容折断

- break-inside：avoid
  - 旧属性page-break-inside：avoid



### 响应式设计

​	RWD（Responsive Web Design）指允许Web页面适应不同屏幕宽度等因素，进行布局和外观调整的一些列实践。

#### 传统网站布局

- 流动布局：页面拉伸充满整个浏览器视窗

  - 小屏幕上会挤成一团，大屏幕上行长度过长

- 固定宽度布局：页面有一个以像素计的固定尺寸

  - 比页面更窄的屏幕会出现一个水平滚动条，大屏幕上边缘会有很多空白

  随移动Web在手机上应用广泛，一个网站需要开发移动和PC版本，并且要保持时效性。

#### 响应式设计前的灵活布局

​	使用Javascript检测屏幕分辨率，载入恰当CSS

#### 响应式设计

​	响应式设计最初描述为三种技术的混合使用，而非单独的技术

- 流体网格
- 流体图像：使用简单的max-width：100%属性可以使得图像尺寸自适应宽度
- 媒体查询：由纯CSS实现的检测屏幕分辨率实现布局切换

#### 媒体查询

```css
@media screen and (min-width: 800px) { 
  .container { 
    margin: 1em 2em; 
  } 
} 
```

​	在一张样式表上可以加入多个媒体查询，以调整在各屏幕下页面的表现。媒体查询，以及样式改变时的点，称为断点。

​	媒体查询的一种通用方式是为移动设备创建简单单栏布局，然后检查在更大的屏幕时，采用多栏布局，称为移动优先设计。

#### 灵活网格

​	灵活网格意味着不需要适配每个可能使用的设备尺寸，而是只需要加入一个断点，在内容看起来不整齐的时候才改变设计。

#### 现代布局技术

​	现代布局方式，如多栏布局，弹性盒和网格默认是响应式的，都在尽力创建可伸缩的网格。

- 多列布局
  - column-count：浏览器将会根据屏幕尺寸变化而计算出列的宽度
  - column-width：浏览器会尽可能多创建最小宽度的列，并将多余的空间分配到列中
- 弹性盒
  - 通过flex-grow和flex-shrink可以指定空间改变时的行为
- CSS网格
  - fr单位允许元素跨列占用网格

#### 响应式图像

- 一般使用max-width：100%设置响应式图像
- 但是更好的方法是使用img元素的srcset和sizes属性来分别在不同设备下载不同图像

#### 响应式排版

- 使用视口单位：1vw为视口宽度百分之一，但是不能只使用视口单位



### 媒体查询

​	媒体查询的基本组成部分有

- 媒体类型
- 媒体表达式
- 一组CSS规则

```css
@media media-type and (media-feature-rule) {
  /* CSS rules go here */
}
```

##### 媒体类型

- all
- print
- screen
- speech

##### 媒体特征规则

- 宽和高
  - 一般检测视口宽度，min-width，max-width，width
- 朝向
  - orientation：potrait（竖放）
  - orientation：landscape（横放）
- 使用触控设备
  - hover媒体特征

#### 更复杂的媒体查询

- 媒体查询中的“与”
  - 使用and可以混合媒体类型和特征
- 媒体查询中的“或”
  - 将一组查询让其中任何一个都可以匹配，需要使用逗号分开这些查询
- 媒体查询中的”非“
  - 使用not操作符在媒体查询的前方使用，反转整个媒体查询的含义

#### 怎么选择断点

​	不适配所有大小的屏幕，而是在内容开始变得混乱的时候改变尺寸的设计。无关使用设备的确切大小，每个范围都被照顾到了。

#### 移动优先的响应式设计

​	从最小的视图开始，随着视口变大逐渐增添布局内容。这种方式称为移动优先的响应式设计，也是使用较为广泛的设计方式。